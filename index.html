<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bhakti Viral - Devotional App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            color-scheme: light dark;
        }
        body {
            font-family: 'Inter', sans-serif;
        }
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        .dark ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        .screen {
            display: none;
        }
        .screen.active {
            display: block;
        }
        #mini-player {
            transition: transform 0.3s ease-in-out;
        }
        #mini-player.active {
            transform: translateY(0);
        }
        #wallpaper-modal {
            transition: opacity 0.3s ease-in-out;
        }
        .lucide {
            width: 24px;
            height: 24px;
            stroke-width: 2;
        }
        .nav-btn .lucide {
             width: 28px;
             height: 28px;
        }
        .settings-icon .lucide {
            width: 22px;
            height: 22px;
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
</head>
<body class="bg-slate-50 dark:bg-slate-950 h-full flex flex-col">

    <div class="flex-1 flex flex-col w-full max-w-lg mx-auto bg-white dark:bg-slate-900 shadow-lg overflow-hidden">
        
        <header class="sticky top-0 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 z-10">
            <div id="header-content" class="flex items-center justify-between h-16 px-4">
            </div>
        </header>

        <main class="flex-1 overflow-y-auto pb-36">
            
            <div id="home-screen" class="screen p-4 active">
                <div class="mb-6">
                    <div class="relative">
                        <input type_text id="search-bar" placeholder="Search for songs or artists..." class="w-full pl-10 pr-4 py-3 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-full text-slate-900 dark:text-slate-200 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
                        <div class="absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500">
                            <i data-lucide="search" class="lucide" style="width: 20px; height: 20px;"></i>
                        </div>
                    </div>
                </div>

                <div class="space-y-4" id="song-list">
                </div>
            </div>

            <div id="wallpapers-screen" class="screen p-4">
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4" id="wallpaper-grid">
                </div>
            </div>

            <div id="favorites-screen" class="screen p-4">
                <div class="space-y-4" id="favorite-song-list">
                </div>
                <div id="no-favorites" class="hidden text-center text-slate-500 dark:text-slate-400 mt-10">
                    <i data-lucide="heart-off" class="lucide inline-block w-12 h-12 mb-4"></i>
                    <h3 class="text-lg font-semibold">No Favorites Yet</h3>
                    <p class="text-sm">Tap the heart icon on any song to add it here.</p>
                </div>
            </div>

            <div id="settings-screen" class="screen">
                <div class="p-6 bg-indigo-50 dark:bg-slate-800 flex items-center space-x-4">
                    <div class="w-16 h-16 rounded-full bg-indigo-500 text-white flex items-center justify-center text-2xl font-semibold">
                        BV
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-slate-800 dark:text-slate-100">Bhakti Viral</h2>
                        <p class="text-slate-500 dark:text-slate-400">user@example.com</p>
                    </div>
                </div>

                <div class="py-4">
                    <ul class="divide-y divide-slate-200 dark:divide-slate-800">
                        <li id="theme-toggle-btn" class="flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer">
                            <div class="flex items-center space-x-4">
                                <i data-lucide="moon" class="lucide text-indigo-500 dark:text-indigo-400 settings-icon"></i>
                                <span class="text-slate-700 dark:text-slate-300 font-medium">Dark Mode</span>
                            </div>
                            <div class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="theme-switch" class="sr-only peer">
                                <div class="w-11 h-6 bg-slate-200 dark:bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-slate-600 peer-checked:bg-indigo-600"></div>
                            </div>
                        </li>
                        <li class="flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer">
                            <div class="flex items-center space-x-4">
                                <i data-lucide="user" class="lucide text-indigo-500 dark:text-indigo-400 settings-icon"></i>
                                <span class="text-slate-700 dark:text-slate-300 font-medium">Account Profile</span>
                            </div>
                            <i data-lucide="chevron-right" class="lucide text-slate-400 settings-icon"></i>
                        </li>
                        <li class="flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer">
                            <div class="flex items-center space-x-4">
                                <i data-lucide="download-cloud" class="lucide text-indigo-500 dark:text-indigo-400 settings-icon"></i>
                                <span class="text-slate-700 dark:text-slate-300 font-medium">Download Queue</span>
                            </div>
                            <i data-lucide="chevron-right" class="lucide text-slate-400 settings-icon"></i>
                        </li>
                         <li class="flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer">
                            <div class="flex items-center space-x-4">
                                <i data-lucide="info" class="lucide text-indigo-500 dark:text-indigo-400 settings-icon"></i>
                                <span class="text-slate-700 dark:text-slate-300 font-medium">About Bhakti Viral</span>
                            </div>
                            <i data-lucide="chevron-right" class="lucide text-slate-400 settings-icon"></i>
                        </li>
                        <li class="flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer">
                            <div class="flex items-center space-x-4">
                                <i data-lucide="log-out" class="lucide text-red-500 dark:text-red-400 settings-icon"></i>
                                <span class="text-red-500 dark:text-red-400 font-medium">Logout</span>
                            </div>
                        </li>
                    </ul>
                </div>

            </div>
        </main>

        <div id="mini-player" class="fixed bottom-16 left-0 right-0 w-full max-w-lg mx-auto bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-3 transform translate-y-full shadow-2xl">
            <div class="flex items-center space-x-3">
                <div id="player-album-art" class="w-12 h-12 rounded-lg bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center">
                    <i data-lucide="music-4" class="lucide text-white w-6 h-6"></i>
                </div>
                <div class="flex-1 min-w-0">
                    <h4 id="player-title" class="text-sm font-semibold text-slate-800 dark:text-slate-100 truncate">Song Title</h4>
                    <p id="player-artist" class="text-xs text-slate-500 dark:text-slate-400 truncate">Artist Name</p>
                </div>
                <div class="flex items-center space-x-2">
                    <button class="text-slate-700 dark:text-slate-300 p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700">
                        <i data-lucide="skip-back" class="lucide w-5 h-5"></i>
                    </button>
                    <button class="text-slate-700 dark:text-slate-300 p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700">
                        <i data-lucide="play" class="lucide w-6 h-6"></i>
                    </button>
                    <button class="text-slate-700 dark:text-slate-300 p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700">
                        <i data-lucide="skip-forward" class="lucide w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>

        <footer class="fixed bottom-0 left-0 right-0 w-full max-w-lg mx-auto bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800">
            <nav class="flex justify-around items-center h-16">
                <button data-target="home-screen" class="nav-btn flex flex-col items-center justify-center p-2 rounded-lg w-20">
                    <i data-lucide="home" class="lucide"></i>
                    <span class="text-xs font-medium">Home</span>
                </button>
                
                <button data-target="wallpapers-screen" class="nav-btn flex flex-col items-center justify-center p-2 rounded-lg w-20">
                    <i data-lucide="image" class="lucide"></i>
                    <span class="text-xs font-medium">Wallpapers</span>
                </button>
                
                <button data-target="favorites-screen" class="nav-btn flex flex-col items-center justify-center p-2 rounded-lg w-20">
                    <i data-lucide="heart" class="lucide"></i>
                    <span class="text-xs font-medium">Favorites</span>
                </button>

                <button data-target="settings-screen" class="nav-btn flex flex-col items-center justify-center p-2 rounded-lg w-20">
                    <i data-lucide="settings" class="lucide"></i>
                    <span class="text-xs font-medium">Settings</span>
                </button>
            </nav>
        </footer>

        <div id="toast" class="fixed bottom-36 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full text-sm opacity-0 transition-opacity duration-300 z-50">
            Feature coming soon!
        </div>

        <div id="wallpaper-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-40 flex flex-col items-center justify-center p-4 opacity-0 pointer-events-none">
            <img id="modal-img" src="" alt="Wallpaper Preview" class="max-w-full max-h-[70vh] rounded-2xl shadow-2xl mb-6">
            <div class="flex space-x-4">
                <button id="modal-close-btn" class="py-3 px-6 bg-white/20 text-white font-semibold rounded-full hover:bg-white/30 transition-colors">
                    Close
                </button>
                <button id="modal-set-btn" class="py-3 px-6 bg-indigo-600 text-white font-semibold rounded-full hover:bg-indigo-500 transition-colors">
                    Set Wallpaper
                </button>
            </div>
        </div>

    </div>

    <script>
        
        let songs = [
            { id: 1, title: "Vakratunda Mahakaya", artist: "Shankar Mahadevan", god: "Ganesha", isFavorite: false },
            { id: 2, title: "Ganesh Atharvashirsha", artist: "Various Artists", god: "Ganesha", isFavorite: false },
            { id: 3, title: "Jai Ganesh Deva", artist: "Anuradha Paudwal", god: "Ganesha", isFavorite: true },
            { id: 4, title: "Sukhakarta Dukhaharta", artist: "Lata Mangeshkar", god: "Ganesha", isFavorite: false },
            { id: 5, title: "Om Gan Ganpataye Namo Namah", artist: "Suresh Wadkar", god: "Ganesha", isFavorite: false },
            { id: 6, title: "Gajananam Bhutaganadi Sevitam", artist: "Various Artists", god: "Ganesha", isFavorite: false },
            { id: 7, title: "Sindhoora Varnaya", artist: "S. P. Balasubrahmanyam", god: "Ganesha", isFavorite: false },
            { id: 8, title: "Om Namo Venkatesaya", artist: "S. P. Balasubrahmanyam", god: "Venkateshwara", isFavorite: true },
            { id: 9, title: "Balaji Mantra", artist: "Various Artists", god: "Venkateshwara", isFavorite: false },
            { id: 10, title: "Govinda Namalu", artist: "M. S. Subbulakshmi", god: "Venkateshwara", isFavorite: false },
            { id: 11, title: "Sri Venkateswara Suprabhatam", artist: "M. S. Subbulakshmi", god: "Venkateshwara", isFavorite: false },
            { id: 12, title: "Tirumala Vasa", artist: "S. Janaki", god: "Venkateshwara", isFavorite: false },
            { id: 13, title: "Venkatesha Stotram", artist: "Priya Sisters", god: "Venkateshwara", isFavorite: false },
            { id: 14, title: "Poojyaya Raghavendraya", artist: "Various Artists", god: "Raghavendra", isFavorite: false },
            { id: 15, title: "Raghavendra Swamy Songs", artist: "K. J. Yesudas", god: "Raghavendra", isFavorite: false },
            { id: 16, title: "Guru Raghavendra", artist: "Rajkumar", god: "Raghavendra", isFavorite: false },
            { id: 17, title: "Om Sri Raghavendraya Namaha", artist: "Various Artists", god: "Raghavendra", isFavorite: false },
            { id: 18, title: "Hanuman Chalisa", artist: "Hariharan", god: "Hanuman", isFavorite: true },
            { id: 19, title: "Shri Ram Jai Ram", artist: "Various Artists", god: "Rama", isFavorite: false },
            { id: 20, title: "Om Namah Shivaya", artist: "Krishna Das", god: "Shiva", isFavorite: false },
            { id: 21, title: "Mahamrityunjay Mantra", artist: "Shankar Sahney", god: "Shiva", isFavorite: false },
            { id: 22, title: "Gayatri Mantra", artist: "Anuradha Paudwal", god: "Gayatri", isFavorite: true },
            { id: 23, title: "Achyutam Keshavam", artist: "Vikram Hazra", god: "Krishna", isFavorite: false },
            { id: 24, title: "Govinda Bolo Hari Gopala Bolo", artist: "Suresh Wadkar", god: "Krishna", isFavorite: false },
            { id: 25, title: "Radhe Krishna Radhe Shyam", artist: "Various Artists", god: "Krishna", isFavorite: false },
            { id: 26, title: "Shiva Tandava Stotram", artist: "Shankar Mahadevan", god: "Shiva", isFavorite: false },
            { id: 27, title: "Lingashtakam", artist: "Various Artists", god: "Shiva", isFavorite: false },
            { id: 28, title: "Om Jai Jagdish Hare", artist: "Lata Mangeshkar", god: "Vishnu", isFavorite: false },
            { id: 29, title: "Vishnu Sahasranamam", artist: "M. S. Subbulakshmi", god: "Vishnu", isFavorite: false },
            { id: 30, title: "Raghupati Raghav Raja Ram", artist: "Various Artists", god: "Rama", isFavorite: false },
            { id: 31, title: "Sri Ramachandra Kripalu", artist: "Lata Mangeshkar", god: "Rama", isFavorite: false },
            { id: 32, title: "Anjaneya Stuti", artist: "S. P. Balasubrahmanyam", god: "Hanuman", isFavorite: false },
            { id: 33, title: "Sri Anjaneyam", artist: "Various Artists", god: "Hanuman", isFavorite: false },
            { id: 34, title: "Lakshmi Gayatri Mantra", artist: "Various Artists", god: "Lakshmi", isFavorite: false },
            { id: 35, title: "Mahalakshmi Ashtakam", artist: "Bombay Sisters", god: "Lakshmi", isFavorite: false },
            { id: 36, title: "Om Jai Lakshmi Mata", artist: "Anuradha Paudwal", god: "Lakshmi", isFavorite: false },
            { id: 37, title: "Saraswati Vandana", artist: "Various Artists", god: "Saraswati", isFavorite: false },
            { id: 38, title: "Ya Kundendu", artist: "Lata Mangeshkar", god: "Saraswati", isFavorite: false },
            { id: 39, title: "Durga Chalisa", artist: "Anuradha Paudwal", god: "Durga", isFavorite: false },
            { id: 40, title: "Om Aim Hrim Klim", artist: "Various Artists", god: "Durga", isFavorite: false },
            { id: 41, title: "Adithya Hrudayam", artist: "S. P. Balasubrahmanyam", god: "Surya", isFavorite: false },
            { id: 42, title: "Surya Ashtakam", artist: "Various Artists", god: "Surya", isFavorite: false },
            { id: 43, title: "Shani Mantra", artist: "Suresh Wadkar", god: "Shani", isFavorite: false },
            { id: 44, title: "Kali Mantra", artist: "Various Artists", god: "Kali", isFavorite: false },
            { id: 45, title: "Subramanya Suprabhatam", artist: "Various Artists", god: "Murugan", isFavorite: false },
            { id: 46, title: "Kanda Shashti Kavasam", artist: "Soolamangalam Sisters", god: "Murugan", isFavorite: false },
            { id: 47, title: "Aigiri Nandini", artist: "Various Artists", god: "Durga", isFavorite: false },
            { id: 48, title: "Navagraha Stotram", artist: "Various Artists", god: "Navagraha", isFavorite: false },
            { id: 49, title: "Datta Stavam", artist: "Various Artists", god: "Dattatreya", isFavorite: false },
            { id: 50, title: "Shri Swami Samarth", artist: "Suresh Wadkar", god: "Swami Samarth", isFavorite: false },
        ];

        const wallpapers = [
            { god: "Ganesha", color: "fde68a" },
            { god: "Venkateshwara", color: "c7d2fe" },
            { god: "Raghavendra", color: "fecaca" },
            { god: "Hanuman", color: "fdba74" },
            { god: "Shiva", color: "bae6fd" },
            { god: "Krishna", color: "bbf7d0" },
            { god: "Rama", color: "a5f3fc" },
            { god: "Lakshmi", color: "fbcfe8" },
            { god: "Saraswati", color: "e9d5ff" },
            { god: "Durga", color: "fca5a5" },
            { god: "Kali", color: "a3a3a3" },
            { god: "Murugan", color: "fda4af" },
            { god: "Vishnu", color: "93c5fd" },
            { god: "Surya", color: "facc15" },
            { god: "Shani", color: "57534e" },
            { god: "Parvati", color: "f9a8d4" },
            { god: "Dattatreya", color: "d8b4fe" },
            { god: "Swami Samarth", color: "f59e0b" },
        ];

        let currentActiveScreen = 'home-screen';

        document.addEventListener('DOMContentLoaded', () => {
            const screens = document.querySelectorAll('.screen');
            const navButtons = document.querySelectorAll('.nav-btn');
            const headerContent = document.getElementById('header-content');
            const songListContainer = document.getElementById('song-list');
            const wallpaperGridContainer = document.getElementById('wallpaper-grid');
            const favSongListContainer = document.getElementById('favorite-song-list');
            const noFavoritesMessage = document.getElementById('no-favorites');
            const toast = document.getElementById('toast');
            const miniPlayer = document.getElementById('mini-player');
            const playerTitle = document.getElementById('player-title');
            const playerArtist = document.getElementById('player-artist');
            const wallpaperModal = document.getElementById('wallpaper-modal');
            const modalImg = document.getElementById('modal-img');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalSetBtn = document.getElementById('modal-set-btn');
            const searchBar = document.getElementById('search-bar');
            const themeToggleBtn = document.getElementById('theme-toggle-btn');
            const themeSwitch = document.getElementById('theme-switch');

            const headers = {
                'home-screen': `
                    <h1 class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">Bhakti Viral</h1>
                    <button class="text-slate-500 dark:text-slate-400 p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800">
                        <i data-lucide="bell" class="lucide w-6 h-6"></i>
                    </button>
                `,
                'wallpapers-screen': `
                    <h1 class="text-2xl font-bold text-slate-800 dark:text-slate-100">Wallpapers</h1>
                    <button class="text-slate-500 dark:text-slate-400 p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800">
                        <i data-lucide="download" class="lucide w-6 h-6"></i>
                    </button>
                `,
                'favorites-screen': `
                    <h1 class="text-2xl font-bold text-slate-800 dark:text-slate-100">My Favorites</h1>
                    <div class="w-10"></div>
                `,
                'settings-screen': `
                    <h1 class="text-2xl font-bold text-slate-800 dark:text-slate-100">Settings</h1>
                    <div class="w-10"></div>
                `
            };

            function showToast(message) {
                toast.textContent = message;
                toast.classList.remove('opacity-0');
                setTimeout(() => {
                    toast.classList.add('opacity-0');
                }, 2000);
            }

            function setActiveScreen(targetId) {
                currentActiveScreen = targetId;
                screens.forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(targetId).classList.add('active');

                navButtons.forEach(btn => {
                    if (btn.dataset.target === targetId) {
                        btn.classList.add('text-indigo-600', 'dark:text-indigo-400');
                        btn.classList.remove('text-slate-500', 'dark:text-slate-400');
                    } else {
                        btn.classList.remove('text-indigo-600', 'dark:text-indigo-400');
                        btn.classList.add('text-slate-500', 'dark:text-slate-400');
                    }
                });

                headerContent.innerHTML = headers[targetId];
                lucide.createIcons();

                if (targetId === 'favorites-screen') {
                    populateFavorites();
                }
            }

            navButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    setActiveScreen(btn.dataset.target);
                });
            });
            
            function createSongCard(song) {
                const favIcon = song.isFavorite 
                    ? `<i data-lucide="heart" class="lucide w-5 h-5 text-red-500" fill="currentColor"></i>`
                    : `<i data-lucide="heart" class="lucide w-5 h-5 text-slate-400 dark:text-slate-500"></i>`;
                
                return `
                    <div class="flex items-center bg-white dark:bg-slate-800 p-3 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700">
                        <div class="w-16 h-16 rounded-xl bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center mr-4">
                            <i data-lucide="music-3" class="lucide text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="font-semibold text-slate-800 dark:text-slate-100 truncate">${song.title}</h3>
                            <p class="text-sm text-slate-500 dark:text-slate-400 truncate">${song.artist}</p>
                        </div>
                        <div class="flex items-center space-x-1">
                            <button class="fav-btn p-3 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" data-song-id="${song.id}">
                                ${favIcon}
                            </button>
                            <button class="play-btn p-3 rounded-full text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-slate-700" data-song-id="${song.id}">
                                <i data-lucide="play-circle" class="lucide w-6 h-6"></i>
                            </button>
                        </div>
                    </div>
                `;
            }

            function populateSongs(filter = '') {
                songListContainer.innerHTML = '';
                const filteredSongs = songs.filter(song => 
                    song.title.toLowerCase().includes(filter) || 
                    song.artist.toLowerCase().includes(filter) ||
                    song.god.toLowerCase().includes(filter)
                );
                
                filteredSongs.forEach(song => {
                    songListContainer.innerHTML += createSongCard(song);
                });
                lucide.createIcons();
            }

            function populateFavorites() {
                favSongListContainer.innerHTML = '';
                const favoriteSongs = songs.filter(song => song.isFavorite);

                if (favoriteSongs.length === 0) {
                    noFavoritesMessage.classList.remove('hidden');
                } else {
                    noFavoritesMessage.classList.add('hidden');
                    favoriteSongs.forEach(song => {
                        favSongListContainer.innerHTML += createSongCard(song);
                    });
                }
                lucide.createIcons();
            }

            function populateWallpapers() {
                wallpapers.forEach(wp => {
                    const imgSrc = `https://placehold.co/360x640/${wp.color}/333333?text=${wp.god}`;
                    const wallpaperCard = `
                        <div class="relative aspect-[9/16] rounded-2xl shadow-lg overflow-hidden group cursor-pointer wallpaper-card" data-img-src="${imgSrc}" data-img-alt="${wp.god} Wallpaper">
                            <img src="${imgSrc}" 
                                 alt="${wp.god} Wallpaper" 
                                 class="w-full h-full object-cover"
                                 onerror="this.src='https://placehold.co/360x640/e2e8f0/94a3b8?text=Image+Not+Found'">
                            
                            <div class="absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                            </div>
                            <div class="absolute bottom-2 left-2 bg-black/40 text-white text-xs font-semibold px-2 py-1 rounded-full">
                                ${wp.god}
                            </div>
                        </div>
                    `;
                    wallpaperGridContainer.innerHTML += wallpaperCard;
                });
            }
            
            function playSong(songId) {
                const song = songs.find(s => s.id === parseInt(songId));
                if (song) {
                    playerTitle.textContent = song.title;
                    playerArtist.textContent = song.artist;
                    miniPlayer.classList.add('active');
                }
            }
            
            function toggleFavorite(songId, buttonElement) {
                const song = songs.find(s => s.id === parseInt(songId));
                if (song) {
                    song.isFavorite = !song.isFavorite;
                    const favIcon = song.isFavorite 
                        ? `<i data-lucide="heart" class="lucide w-5 h-5 text-red-500" fill="currentColor"></i>`
                        : `<i data-lucide="heart" class="lucide w-5 h-5 text-slate-400 dark:text-slate-500"></i>`;
                    buttonElement.innerHTML = favIcon;
                    lucide.createIcons();
                    
                    if (currentActiveScreen === 'favorites-screen') {
                        populateFavorites();
                    }
                }
            }

            function showWallpaperModal(src, alt) {
                modalImg.src = src;
                modalImg.alt = alt;
                wallpaperModal.classList.remove('opacity-0', 'pointer-events-none');
            }

            function hideWallpaperModal() {
                wallpaperModal.classList.add('opacity-0', 'pointer-events-none');
            }
            
            document.body.addEventListener('click', (e) => {
                const playBtn = e.target.closest('.play-btn');
                if (playBtn) {
                    playSong(playBtn.dataset.songId);
                }
                
                const favBtn = e.target.closest('.fav-btn');
                if (favBtn) {
                    toggleFavorite(favBtn.dataset.songId, favBtn);
                }

                const wallpaperCard = e.target.closest('.wallpaper-card');
                if (wallpaperCard) {
                    showWallpaperModal(wallpaperCard.dataset.imgSrc, wallpaperCard.dataset.imgAlt);
                }
                
                if (e.target.closest('#settings-screen li') && !e.target.closest('#theme-toggle-btn')) {
                    showToast('Feature coming soon!');
                }
            });
            
            modalCloseBtn.addEventListener('click', hideWallpaperModal);
            modalSetBtn.addEventListener('click', () => {
                showToast('Wallpaper set (simulation)');
                hideWallpaperModal();
            });
            
            searchBar.addEventListener('input', (e) => {
                populateSongs(e.target.value.toLowerCase());
            });

            function setDarkMode(isDark) {
                if (isDark) {
                    document.documentElement.classList.add('dark');
                    themeSwitch.checked = true;
                } else {
                    document.documentElement.classList.remove('dark');
                    themeSwitch.checked = false;
                }
            }

            themeToggleBtn.addEventListener('click', () => {
                setDarkMode(!document.documentElement.classList.contains('dark'));
            });
            
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                setDarkMode(true);
            } else {
                setDarkMode(false);
            }

            populateSongs();
            populateWallpapers();
            setActiveScreen('home-screen');
            
            lucide.createIcons();
        });
    </script>
</body>
</html>
